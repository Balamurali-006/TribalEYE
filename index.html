<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation System - Tribal Land System</title>
    
    <!-- Prevent caching to ensure fresh loads -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <style>
        /* Enhanced Navigation CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background particles */
        .bg-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Enhanced Navigation */
        .tribal-nav {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .tribal-nav:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .nav-brand {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 12px;
        }

        .nav-brand:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .nav-brand .logo {
            font-size: 1.6rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .nav-menu {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 10px 18px;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.85;
            font-size: 0.95rem;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .nav-link.active {
            opacity: 1;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15));
            box-shadow: 
                0 4px 15px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-link.logout-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            margin-left: 10px;
            position: relative;
        }

        .nav-link.logout-btn:hover {
            background: linear-gradient(135deg, #ff5252, #d32f2f);
            transform: translateY(-2px) scale(1.05);
        }

        /* Enhanced Breadcrumb */
        .breadcrumb {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 24px;
            border-radius: 30px;
            color: white;
            margin-bottom: 25px;
            backdrop-filter: blur(15px);
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .breadcrumb a {
            color: white;
            text-decoration: none;
            opacity: 0.8;
            transition: all 0.3s ease;
            padding: 4px 8px;
            border-radius: 6px;
        }

        .breadcrumb a:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.15);
        }

        .breadcrumb-separator {
            opacity: 0.6;
            font-weight: bold;
        }

        /* Enhanced Content Area */
        .content-area {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .content-area::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.05) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
        }

        .content-area h1 {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
        }

        .content-area h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .content-area h2 {
            color: #333;
            font-size: 1.8rem;
            font-weight: 700;
            margin: 30px 0 20px;
            position: relative;
            padding-left: 20px;
        }

        .content-area h2::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .content-area p {
            color: #555;
            line-height: 1.7;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        /* Enhanced Integration Guide */
        .integration-guide {
            background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%);
            border-left: 5px solid #667eea;
            padding: 25px;
            margin: 25px 0;
            border-radius: 0 15px 15px 0;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .integration-guide::before {
            content: '';
            position: absolute;
            top: 0;
            right: -50px;
            width: 100px;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.05));
            transform: skewX(-15deg);
            pointer-events: none;
        }

        .integration-guide:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .integration-guide h3 {
            color: #667eea;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .integration-guide h3::before {
            content: '✦';
            color: #667eea;
            font-size: 1.2rem;
        }

        /* Enhanced Feature List */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 249, 255, 0.8));
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(102, 126, 234, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.05) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.15);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-card .feature-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            display: block;
        }

        .feature-card .feature-text {
            font-size: 1rem;
            color: #555;
            line-height: 1.6;
        }

        /* Enhanced Quick Navigation */
        .quick-nav {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }

        .quick-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .quick-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .quick-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }

        .quick-btn:hover::before {
            opacity: 1;
        }

        .quick-btn:active {
            transform: scale(1.05);
        }

        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(102, 126, 234, 0.1);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Fade-in animation for page content */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .tribal-nav {
                flex-direction: column;
                gap: 20px;
                text-align: center;
                padding: 25px 20px;
            }

            .nav-menu {
                justify-content: center;
                gap: 8px;
            }

            .nav-link {
                font-size: 0.85rem;
                padding: 8px 14px;
            }

            .nav-brand {
                font-size: 1.3rem;
            }

            .content-area {
                padding: 25px;
            }

            .content-area h1 {
                font-size: 2rem;
            }

            .quick-nav {
                bottom: 20px;
                right: 20px;
            }

            .quick-btn {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }
        }

        @media (max-width: 480px) {
            .nav-menu {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                width: 100%;
            }

            .nav-link {
                text-align: center;
                justify-content: center;
            }

            .content-area {
                padding: 20px;
            }

            .integration-guide {
                padding: 20px;
                margin: 20px -5px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated background particles -->
    <div class="bg-particles" id="particles"></div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <div class="container fade-in">
        <!-- Enhanced Navigation Component -->
        <nav class="tribal-nav">
            <a href="index.html" class="nav-brand">
                <span><img src="logo.jpg" alt="Tribal EYE Logo" style="height: 40px;"></span>
                <span>Tribal EYE</span>
            </a>
            <div class="nav-menu">
                <a href="index.html" class="nav-link" data-page="index">
                    <span>🏠</span> <span>Home</span>
                </a>
                <a href="search.html" class="nav-link" data-page="add">
                    <span>➕</span> <span>Add</span>
                </a>
                <a href="recommendation.html" class="nav-link" data-page="search">
                    <span>🔍</span> <span>Search</span>
                </a>
                <a href="all_records.html" class="nav-link" data-page="records">
                    <span>📋</span> <span>Records</span>
                </a>
                <a href="scheme.html" class="nav-link" data-page="schemes">
                    <span>🎯</span> <span>Schemes</span>
                </a>
                <a href="javascript:void(0)" onclick="confirmLogout()" class="nav-link logout-btn" data-page="logout">
                    <span>🚪</span> <span>Logout</span>
                </a>
            </div>
        </nav>

        <!-- Enhanced Breadcrumb Component -->
        <div class="breadcrumb">
            <a href="index.html">🏠 Dashboard</a> 
            <span class="breadcrumb-separator">•</span> 
            <span id="current-page-name">System Guide</span>
        </div>

        <!-- Enhanced Content Area -->
        <div class="content-area">
            <h1>Tribal Information Management System</h1>
            <p>This comprehensive system is designed to efficiently manage and store detailed information about tribal individuals while maintaining secure links to their Patta ID (land record identifiers). Our platform ensures accurate record-keeping and easy access to vital information.</p>

            <div class="integration-guide">
                <h3>Step 1: Collect Basic Information</h3>
                <p>Begin by gathering essential personal details including full name, age, gender, tribal community name, and primary contact information. This forms the foundation of each individual's record in our system.</p>
            </div>

            <div class="integration-guide">
                <h3>Step 2: Record Patta Details</h3>
                <p>Carefully enter the unique Patta ID, total land area measurements, and the official Patta issue date. This creates a secure digital link between each individual and their registered land holdings.</p>
            </div>

            <div class="integration-guide">
                <h3>Step 3: Store Location Data</h3>
                <p>Accurately record the village name, district, and state information to create a comprehensive geographical mapping of where each individual and their land is located within the administrative boundaries.</p>
            </div>

            <div class="integration-guide">
                <h3>Step 4: Maintain Records</h3>
                <p>Ensure all records are properly cross-referenced with their respective Patta IDs for seamless search functionality, quick retrieval, and official verification processes when needed.</p>
            </div>

            <h2>System Features & Capabilities</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <span class="feature-icon">🏛️</span>
                    <div class="feature-text">
                        <strong>Centralized Storage:</strong> Secure, organized database for all tribal information with robust backup systems
                    </div>
                </div>
                <div class="feature-card">
                    <span class="feature-icon">🔍</span>
                    <div class="feature-text">
                        <strong>Advanced Search:</strong> Multi-parameter search by Patta ID, name, tribe, location, or any combination
                    </div>
                </div>
                <div class="feature-card">
                    <span class="feature-icon">🏞️</span>
                    <div class="feature-text">
                        <strong>Land Records:</strong> Direct access to detailed land ownership information and historical records
                    </div>
                </div>
                <div class="feature-card">
                    <span class="feature-icon">🔒</span>
                    <div class="feature-text">
                        <strong>Data Security:</strong> Bank-level encryption and secure access controls protect sensitive information
                    </div>
                </div>
                <div class="feature-card">
                    <span class="feature-icon">📱</span>
                    <div class="feature-text">
                        <strong>Cross-Platform:</strong> Fully responsive design works seamlessly on mobile, tablet, and desktop
                    </div>
                </div>
                <div class="feature-card">
                    <span class="feature-icon">📊</span>
                    <div class="feature-text">
                        <strong>Export & Reports:</strong> Generate CSV reports and detailed analytics for administrative purposes
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Quick Navigation -->
        <div class="quick-nav">
            <button class="quick-btn" onclick="goToPage('map.html')" title="View Map">🗺️</button>
            <button class="quick-btn" onclick="goToPage('search.html')" title="Quick Add Record">➕</button>
            <button class="quick-btn" onclick="goToPage('recommendation.html')" title="Search Records">🔍</button>
            <button class="quick-btn" onclick="goToPage('index.html')" title="Home Dashboard">🏠</button>
            <button class="quick-btn" onclick="scrollToTop()" title="Back to Top">⬆️</button>
        </div>
    </div>

    <script>
        // Enhanced Navigation JavaScript with Page Reload Fix
        
        // Page mapping for titles and active states
        const pageInfo = {
            'index.html': { title: 'index', name: 'index' },
            'search.html': { title: 'Add New Record', name: 'Add Record' },
            'recommendation.html': { title: 'Search & Find Records', name: 'Search Records' },
            'all_records.html': { title: 'All Land Records', name: 'All Records' },
            'scheme.html': { title: 'Scheme Information', name: 'Schemes' },
            'map.html': { title: 'Login', name: 'Login' },
            'index.html': { title: 'System Guide', name: 'System Guide' }
        };

        // Force page reload detection and handling
        let isPageReloaded = false;

        // Initialize navigation on page load
        document.addEventListener('DOMContentLoaded', function() {
            handlePageLoad();
            initializeNavigation();
            createBackgroundParticles();
            setupPageVisibilityHandler();
        });

        // Handle page visibility change (when user returns to tab)
        function setupPageVisibilityHandler() {
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    // Page is now visible, refresh content
                    refreshPageContent();
                }
            });
        }

        // Handle page load and reload detection
        function handlePageLoad() {
            // Check if page was loaded from cache
            if (performance.navigation.type === 2) {
                // Page was loaded from back/forward cache
                forcePageRefresh();
            }
            
            // Set page load timestamp
            sessionStorage.setItem('pageLoadTime', Date.now().toString());
            
            // Check for stale content
            const lastVisit = localStorage.getItem('lastIndexVisit');
            const currentTime = Date.now();
            
            if (lastVisit && (currentTime - parseInt(lastVisit)) > 5000) { // 5 seconds threshold
                refreshPageContent();
            }
            
            localStorage.setItem('lastIndexVisit', currentTime.toString());
        }

        // Force page refresh if needed
        function forcePageRefresh() {
            if (!isPageReloaded) {
                isPageReloaded = true;
                window.location.reload(true);
            }
        }

        // Refresh page content without full reload
        function refreshPageContent() {
            // Re-initialize all dynamic content
            initializeNavigation();
            
            // Refresh any dynamic data if needed
            const contentArea = document.querySelector('.content-area');
            if (contentArea) {
                contentArea.classList.remove('fade-in');
                setTimeout(() => {
                    contentArea.classList.add('fade-in');
                }, 50);
            }
            
            // Update timestamp display if you have one
            updateLastRefreshTime();
        }

        function initializeNavigation() {
            const currentPage = getCurrentPageName();
            
            // Set active navigation link
            setActiveNavLink(currentPage);
            
            // Update breadcrumb
            updateBreadcrumb(currentPage);
            
            // Update page title if needed
            updatePageTitle(currentPage);
        }

        function getCurrentPageName() {
            const path = window.location.pathname;
            const filename = path.split('/').pop() || 'index.html';
            return filename;
        }

        function setActiveNavLink(currentPage) {
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // Add active class to current page link
            const currentLink = document.querySelector(`a[href="${currentPage}"]`);
            if (currentLink && currentLink.classList.contains('nav-link')) {
                currentLink.classList.add('active');
            }
        }

        function updateBreadcrumb(currentPage) {
            const breadcrumbSpan = document.getElementById('current-page-name');
            if (breadcrumbSpan && pageInfo[currentPage]) {
                breadcrumbSpan.textContent = pageInfo[currentPage].name;
            }
        }

        function updatePageTitle(currentPage) {
            if (pageInfo[currentPage]) {
                document.title = `${pageInfo[currentPage].title} - Tribal Land System`;
            }
        }

        // Add refresh timestamp (optional)
        function updateLastRefreshTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            console.log(`Page refreshed at: ${timeString}`);
            
            // You can add a visual indicator if needed
            // const indicator = document.createElement('div');
            // indicator.style.cssText = 'position:fixed;top:10px;right:10px;background:#4CAF50;color:white;padding:5px 10px;border-radius:5px;font-size:12px;z-index:10000;';
            // indicator.textContent = `Updated: ${timeString}`;
            // document.body.appendChild(indicator);
            // setTimeout(() => indicator.remove(), 3000);
        }

        // Enhanced utility functions
        function goToPage(page) {
            // Clear any cached data before navigation
            clearPageCache();
            navigateWithLoading(page);
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Clear page cache before navigation
        function clearPageCache() {
            // Remove any cached page data
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        if (name.includes('page-cache')) {
                            caches.delete(name);
                        }
                    });
                });
            }
            
            // Update navigation timestamp
            sessionStorage.setItem('navigationTime', Date.now().toString());
        }

        // Enhanced navigation with loading states
        function navigateWithLoading(url) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            // Add timestamp to URL to prevent caching
            const timestamp = Date.now();
            const separator = url.includes('?') ? '&' : '?';
            const urlWithTimestamp = `${url}${separator}t=${timestamp}`;
            
            setTimeout(() => {
                window.location.href = urlWithTimestamp;
            }, 800);
        }

        // Logout confirmation
        function confirmLogout() {
            if (confirm('Are you sure you want to logout? Any unsaved changes will be lost.')) {
                clearPageCache();
                navigateWithLoading('map.html');
            }
        }

        // Create animated background particles
        function createBackgroundParticles() {
            const particlesContainer = document.getElementById('particles');
            
            // Clear existing particles
            particlesContainer.innerHTML = '';
            
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Enhanced navigation with smooth transitions and cache prevention
        document.querySelectorAll('.nav-link:not(.logout-btn)').forEach(link => {
            link.addEventListener('click', function(e) {
                if (this.href && !this.href.includes('javascript:') && this.href !== window.location.href) {
                    e.preventDefault();
                    clearPageCache();
                    navigateWithLoading(this.href);
                }
            });
        });

        // Handle browser back/forward buttons
        window.addEventListener('pageshow', function(event) {
            if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
                // Page was loaded from cache (back/forward button)
                console.log('Page loaded from cache - refreshing content');
                refreshPageContent();
                
                // Force a small delay to ensure proper rendering
                setTimeout(() => {
                    window.location.reload(true);
                }, 100);
            }
        });

        // Handle pop state changes (browser navigation)
        window.addEventListener('popstate', function(event) {
            console.log('Popstate detected - refreshing page');
            setTimeout(() => {
                window.location.reload(true);
            }, 50);
        });

        // Prevent back button caching issues
        window.addEventListener('beforeunload', function() {
            // Store current state
            sessionStorage.setItem('pageUnloadTime', Date.now().toString());
        });

        // Add hover effects and animations
        document.querySelectorAll('.feature-card').forEach((card, index) => {
            card.style.animationDelay = (index * 0.1) + 's';
        });

        // Smooth scroll for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Auto-refresh mechanism (optional - every 5 minutes)
        let autoRefreshInterval;
        
        function startAutoRefresh() {
            // Clear any existing interval
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
            }
            
            // Set up auto-refresh every 5 minutes (300000ms)
            autoRefreshInterval = setInterval(() => {
                console.log('Auto-refreshing page content...');
                refreshPageContent();
            }, 300000);
        }

        // Start auto-refresh when page is loaded
        startAutoRefresh();

        // Clean up interval when page is about to unload
        window.addEventListener('beforeunload', () => {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
            }
        });

        // Additional cache-busting for critical resources
        function bustCache() {
            const timestamp = Date.now();
            
            // Add timestamp to any dynamic content URLs
            document.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
                if (link.href && !link.href.includes('?t=')) {
                    link.href += `?t=${timestamp}`;
                }
            });
            
            // Refresh any images that might be cached
            document.querySelectorAll('img').forEach(img => {
                if (img.src && !img.src.includes('?t=')) {
                    const originalSrc = img.src;
                    img.src = `${originalSrc}?t=${timestamp}`;
                }
            });
        }

        // Call cache busting on critical moments
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                bustCache();
            }
        });

        // Performance monitoring
        window.addEventListener('load', function() {
            const loadTime = performance.now();
            console.log(`Page loaded in ${loadTime.toFixed(2)}ms`);
            
            // Store performance metrics
            sessionStorage.setItem('pageLoadPerformance', loadTime.toString());
        });
    </script>
    <script>
(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="_DirsUPGYN-wboDoWy76K";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
</script>
</body>
</html>